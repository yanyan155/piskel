!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(c=n,i=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(l," */")),a=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")});return[r].concat(a).concat([o]).join("\n")}var c,i,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var c=0;c<e.length;c++){var i=e[c];null!=i[0]&&n[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="(".concat(i[2],") and (").concat(r,")")),t.push(i))}},t}},function(e,t,r){var n,o,a={},c=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),i=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,s=0,u=[],f=r(2);function d(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=a[n.id];if(o){o.refs++;for(var c=0;c<o.parts.length;c++)o.parts[c](n.parts[c]);for(;c<n.parts.length;c++)o.parts.push(k(n.parts[c],t))}else{var i=[];for(c=0;c<n.parts.length;c++)i.push(k(n.parts[c],t));a[n.id]={id:n.id,refs:1,parts:i}}}}function m(e,t){for(var r=[],n={},o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],i={css:a[1],media:a[2],sourceMap:a[3]};n[c]?n[c].parts.push(i):r.push(n[c]={id:c,parts:[i]})}return r}function v(e,t){var r=i(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=i(e.insertAt.before,r);r.insertBefore(t,o)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return r.nc}();n&&(e.attrs.nonce=n)}return h(t,e.attrs),v(e,t),t}function h(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function k(e,t){var r,n,o,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var c=s++;r=l||(l=y(t)),n=x.bind(null,r,c,!1),o=x.bind(null,r,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",h(t,e.attrs),v(e,t),t}(t),n=function(e,t,r){var n=r.css,o=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(n=f(n));o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var c=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(c),i&&URL.revokeObjectURL(i)}.bind(null,r,t),o=function(){p(r),r.href&&URL.revokeObjectURL(r.href)}):(r=y(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),o=function(){p(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=c()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return d(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var c=r[o];(i=a[c.id]).refs--,n.push(i)}e&&d(m(e,t),t);for(o=0;o<n.length;o++){var i;if(0===(i=n[o]).refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete a[i.id]}}}};var b,g=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var a=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(a,c[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,r){var n=r(4);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(1)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".wrap {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n}\r\nhtml {\r\n-webkit-touch-callout: none; /* iOS Safari */\r\n  -webkit-user-select: none; /* Safari */\r\n   -khtml-user-select: none; /* Konqueror HTML */\r\n     -moz-user-select: none; /* Firefox */\r\n      -ms-user-select: none; /* Internet Explorer/Edge */\r\n          user-select: none; \r\n}\r\n.components-wrap {\r\n  width: 900px;\r\n}\r\n   ",""])},,,,function(e,t,r){"use strict";r.r(t);r(3);var n=function(e){o(e),a(e),c(e)},o=function(e){e.createLayerId++},a=function(e){var t=e.activeFrameId,r=e.createLayerId,n=e.layersHook.findIndex(function(e){return e.frameId===t});if(-1!==n)e.layersHook[n].layersId.push(r);else{var o={frameId:t,layersId:[r]};e.layersHook.push(o)}},c=function(e){var t=e.activeFrameId,r=e.layersHook.find(function(e){return e.frameId===t});document.querySelectorAll(".layers-wrap .layer-element").forEach(function(e){return e.remove()});for(var n=0,o="";n<r.layersId.length;){var a=e.activeLayerId===r.layersId[n]?"active":"",c="<label id=".concat(r.layersId[n],' class="d-flex btn btn-outline-secondary border-0 layer-element ').concat(a,'">\n      <input type="radio" name="layers" checked>\n      <span class="mr-auto">layer ').concat(r.layersId[n],'</span>\n      <span class="fi-circle-x cursor mr-2"></span>\n      <span class="fi-arrow-thick-bottom mr-2"></span>\n      <span class="fi-arrow-thick-top"></span>\n    </label>');o="".concat(o," ").concat(c),n++}document.querySelector(".layers-wrap .layer-block").insertAdjacentHTML("beforeend",o)},i=function(e,t){var r=t.activeLayerId,n=e.color.find(function(e){return e.id===r});return n?n.data:t.defaultColor},l=function(e,t){return e.color[e.color.length-1].data||t.defaultColor},s=function(e,t,r,n,o){t.forEach(function(e){var t=e.color.findIndex(function(e){return e.id===n}),o=e.color.findIndex(function(e){return e.id===r});if(-1!==t&&-1!==o){var a=e.color[t].data;e.color[t].id=r,e.color[t].data=e.color[o].data,e.color[o].id=n,e.color[o].data=a}});var a=o.layersId.findIndex(function(e){return e===n}),c=o.layersId.findIndex(function(e){return e===r}),i=o.layersId[a];o.layersId[a]=o.layersId[c],o.layersId[c]=i},u=function(e){var t=document.querySelectorAll(".layers-wrap .layer-element"),r=Array.from(t);r.forEach(function(e){return e.classList.remove("active")}),r.forEach(function(t){return t.id===e?t.classList.add("active"):t})},f=function(e){var t=e.activeLayerId,r=e.activeFrameId;e.canvasBlocks.find(function(e){return e.id===r}).data.forEach(function(r){r.color.length>1?r.color=r.color.filter(function(e){return e.id!==t}):1===r.color.length&&(r.color=r.color.map(function(n){if(n.id===t){var o=m(e);n.id=o}return r}))});var n=e.layersHook.find(function(e){return e.frameId===t});n&&(n=n.layersId.filter(function(e){return e!==t}))},d=function(){document.querySelector(".result-layer").classList.remove("active")},m=function(e){var t=e.activeFrameId;return e.layersHook.find(function(e){return e.frameId===t}).layersId[1]},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p(0);y(e),h(t,e),o(e);var r={frameId:e.createFrameId,layersId:[e.createLayerId]};e.layersHook.push(r),c(e),k(e)},p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],r=0;r<128;r++)for(var n=0;n<128;n++){var o=Object.create(null);o.color=[{data:"#007BFF",id:e}],o.col=n,o.row=r,t.push(o)}return t},y=function(e){e.createFrameId++},h=function(e,t){var r={id:t.createFrameId,data:e};t.canvasBlocks.push(r)},k=function(e){document.querySelectorAll(".frames-wrap .frame-element").forEach(function(e){return e.remove()});for(var t=0,r="";t<e.canvasBlocks.length;){var n=e.activeFrameId===e.canvasBlocks[t].id?"active":"",o="<label id=".concat(e.canvasBlocks[t].id,' class="d-flex btn btn-outline-secondary border-0 frame-element ').concat(n,'">\n            <input type="radio" name="frames" checked>\n            <span class="mr-auto">frame ').concat(e.canvasBlocks[t].id,'</span>\n            <span class="fi-circle-x cursor mr-2"></span>\n            <span class="fi-layers cursor"></span>\n          </label>');r="".concat(r," ").concat(o),t++}document.querySelector(".frames-block").insertAdjacentHTML("beforeend",r)},b=function(e){for(var t=e.target,r=t.id;!r;)r=(t=t.parentNode).id;return Number(r)},g=function(e){var t=document.querySelectorAll(".frames-wrap .frame-element"),r=Array.from(t);r.forEach(function(e){return e.classList.remove("active")}),r.forEach(function(t){return t.id===e?t.classList.add("active"):t})},x=function(e,t){var r=e.canvasBlocks.findIndex(function(e){return e.id===t});e.canvasBlocks.splice(r,1),e.layersHook=e.layersHook.filter(function(e){return e.frameId!==t})},I=!1,Y=!1,X=function(e,t,r){for(var n=e,o=W(n.col,n.row-1),a=Z(r),c=a[o];c&&ee(c,r).data===t;)c=a[o=W((n=c).col,n.row-1)];return n},w=function(e,t,r){var n=W(e.col,e.row+1),o=Z(r)[n];if(o&&ee(o,r).data===t)return o},S=function(e,t,r,n,o,a){var c,i=Z(a);o?c=i[W(e.col-1,e.row)]:c=i[W(e.col+1,e.row)];if(c){if(ee(c,a).data!==n)return!1;if(!t)return r.push(c),!0}},L=function(e,t){var r=G(t),n=E(r.clickX),o=E(r.clickY);$(r.clickX,r.clickY,e.color,e,J),t.shiftKey?$(n,r.clickY,e.color,e,J):$(r.clickX,o,e.color,e,J)},E=function(e){return 640-e},B=function(e,t,r){var n=640/e.canvasSize,o=e.pointSize,a=R();_(a,t.minX*n,t.minY*n,(t.maxX-t.minX)*n*o,(t.maxY-t.minY)*n*o,e.color);var c=Z(e);c=c.map(function(o){var a=o.col*e.blockSize/n,c=o.row*e.blockSize/n;return a>=t.minX&&a<t.maxX&&c>=t.minY&&c<t.maxY?r(o,e.color,e):o})},C=function(e,t){return e.minX<=t.minX&&e.minY<=t.minY?{minX:e.minX,maxX:t.maxX,minY:e.minY,maxY:t.maxY}:e.minX>=t.minX&&e.minY>=t.minY?{minX:t.minX,maxX:e.maxX,minY:t.minY,maxY:e.maxY}:e.minX<=t.minX&&e.minY>=t.minY?{minX:e.minX,maxX:t.maxX,minY:t.minY,maxY:e.maxY}:e.minX>=t.minX&&e.minY<=t.minY?{minX:t.minX,maxX:e.maxX,minY:e.minY,maxY:t.maxY}:void 0},q=function(e,t,r,n,o,a){var c=e.canvasSize,i=e.pointSize,l=640/c;return a(D(t,r,l,i),D(n,o,l,i))},F=function(e,t){return[{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY},{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY},{minX:e.minX,maxX:e.maxX,minY:t.minY,maxY:t.maxY},{minX:t.minX,maxX:t.maxX,minY:e.minY,maxY:e.maxY}]},z=function(e,t){return[{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:t.maxY},{minX:e.minX,maxX:t.maxX,minY:e.minY,maxY:e.maxY},{minX:e.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY},{minX:t.minX,maxX:t.maxX,minY:e.minY,maxY:t.maxY}]},M=function(e){var t=e.tool,r=document.querySelectorAll(".tool-block label");Array.from(r).forEach(function(e){e.classList.remove("active"),e.id===t&&e.classList.add("active")})},H=function(){return document.querySelector(".preview").getContext("2d")},T=function(e,t){var r=H(),n=l;e.forEach(function(e){_(r,e.col,e.row,1,1,n(e,t))})},A=function(e){O(e);var t=e.activeFrameId,r=e.canvasBlocks.find(function(e){return e.id===t});e.timerId=setTimeout(function n(){T(r.data,e),t=j(e,t),r=e.canvasBlocks.find(function(e){return e.id===t}),e.timerId=setTimeout(n,1e3/e.fps)},1e3/e.fps)},j=function(e,t){var r=e.canvasBlocks.findIndex(function(e){return e.id===t});return e.canvasBlocks[r+1]?r+1:0},O=function(e){e.timerId&&clearTimeout(e.timerId)},U=function(e){var t=document.querySelectorAll(".fps-list button");Array.from(t).forEach(function(t){t.classList.remove("active"),t.dataset.fps===e&&t.classList.add("active")})},R=function(){return document.querySelector(".canvas").getContext("2d")},N=!1,P=!1,_=function(e,t,r,n,o,a){e.beginPath(),e.rect(t,r,n,o),e.fillStyle=a,e.fill(),e.closePath()},J=function(e,t,r){return ee(e,r).data=t,e},D=function(e,t,r,n){if(1===n||2===n)return{minX:Math.floor(e/r),minY:Math.floor(t/r),maxX:Math.ceil(e/r)+(n-1),maxY:Math.ceil(t/r)+(n-1)};if(3===n){var o=Math.floor(e/r)-1;o<0&&(o=0);var a=Math.floor(t/r)-1;return a<0&&(a=0),{minX:o,minY:a,maxX:Math.ceil(e/r)+1,maxY:Math.ceil(t/r)+1}}},$=function(e,t,r,n,o){var a=n.canvasSize,c=n.pointSize,i=640/a,l=D(e,t,i,c),s=R();_(s,l.minX*i,l.minY*i,i*c,i*c,r),K(n,l,i,o,r);var u=n.canvasBlocks[0].data.filter(function(e){return"#28A745"===e.color[0].data});console.log(u)},K=function(e,t,r,n,o){var a=Z(e);a=a.map(function(a){var c=a.col*e.blockSize/r,i=a.row*e.blockSize/r;return c>=t.minX&&c<t.maxX&&i>=t.minY&&i<t.maxY?n(a,o,e):a})},G=function(e){var t=document.querySelector(".canvas"),r=t.getBoundingClientRect().left,n=t.getBoundingClientRect().top;return{clickX:e.pageX-r-pageXOffset,clickY:e.pageY-n-pageYOffset}},Q=function(e){document.querySelector(".canvas-size-block").addEventListener("click",function(t){if(!t.target.classList.contains("active")){for(var r,n=t.target;!n.dataset.size;)n=n.parentNode;r=n.dataset.size,e.canvasSize=Number(r)}});var t=document.querySelector(".canvas");t.addEventListener("mousedown",function(t){if(-5!==e.activeLayerId){if("pen"===e.tool){var r=G(t);$(r.clickX,r.clickY,e.color,e,J)}else if("paint-bucket"===e.tool)!function(e,t){var r=[],n=G(t),o=V(n,e),a=ee(o,e).data;if(a!==e.color)for(r.push(o);r.length;)for(var c=r.pop(),i=X(c,a,e),l=!1,s=!1;i;){var u=i;l=S(i,l,r,a,!0,e),s=S(i,s,r,a,!1,e),i=w(i,a,e);var f=R();_(f,u.col*e.blockSize,u.row*e.blockSize,e.blockSize,e.blockSize,e.color),ee(u,e).data=e.color}}(e,t);else if("color-picker"===e.tool)!function(e,t){var r=G(t),n=V(r,e),o=ee(n,e).data;e.color=o;var a=document.querySelectorAll(".choose-color-block label");Array.from(a).forEach(function(e){e.classList.remove("active"),e.dataset.color===o&&e.classList.add("active")})}(e,t);else if("paint-bucket-all"===e.tool)!function(e){var t=R();_(t,0,0,640,640,e.color),Z(e).forEach(function(t){ee(t,e).data=e.color})}(e);else if("stroke"===e.tool){var n=G(t);$(n.clickX,n.clickY,e.color,e,J)}else if("mirror"===e.tool)L(e,t);else if("rectangle"===e.tool){var o=G(t);re(e,o.clickX,o.clickY)}else if("square"===e.tool){var a=G(t);re(e,a.clickX,a.clickY)}}else alert("You have no abiblity to draw on result layer, please change layer before drawing.")});var r=document.querySelector("html");r.addEventListener("mousedown",function(e){1==e.which&&(N=!0)}),r.addEventListener("mouseup",function(t){if("rectangle"===e.tool&&t.target.classList.contains("canvas")){if(N){var r=G(t);!function(e,t){var r=q(e,e.startCoord.x,e.startCoord.y,t.clickX,t.clickY,C);B(e,r,J)}(e,r)}}else if("square"===e.tool&&t.target.classList.contains("canvas")&&N){var n=G(t);!function(e,t){var r=q(e,e.startCoord.x,e.startCoord.y,t.clickX,t.clickY,z),n=q(e,e.startCoord.x,e.startCoord.y,t.clickX,t.clickY,F);r.forEach(function(t){return B(e,t,J)}),n.forEach(function(t){return B(e,t,J)})}(e,n)}1==t.which&&(N=!1,e.startCoord.x=null,e.startCoord.y=null),function(e){var t=e.activeFrameId,r=e.canvasBlocks.find(function(e){return e.id===t});T(r.data,e)}(e)}),t.addEventListener("mousemove",function(t){if(ne(t),-5!==e.activeLayerId){if(N||P||(alert("To start drawing with pen or mirror or eraser or stroke push left mouse button and move cursor on canvas field."),P=!0),"pen"===e.tool){if(N){var r=G(t);$(r.clickX,r.clickY,e.color,e,J)}}else if("mirror"===e.tool)N&&L(e,t);else if("eraser"===e.tool){if(N){var n=G(t);$(n.clickX,n.clickY,e.eraseColor,e,J)}}else if("stroke"===e.tool&&N){var o=G(t);e.startCoord.x||e.startCoord.y||re(e,o.clickX,o.clickY),t.shiftKey?$(e.startCoord.x,o.clickY,e.color,e,J):$(o.clickX,e.startCoord.y,e.color,e,J)}}else alert("You have no abiblity to draw on result layer, please change layer before drawing.")})},V=function(e,t){var r=Math.floor(e.clickX/t.blockSize),n=Math.floor(e.clickY/t.blockSize),o=W(r,n);return Z(t)[o]},W=function(e,t){return 128*t+e},Z=function(e){var t=e.activeFrameId;return e.canvasBlocks.find(function(e){return e.id===t}).data},ee=function(e,t){var r=t.activeLayerId,n=e.color.find(function(e){return e.id===r});if(n)return n;var o={id:r,data:t.defaultColor};return e.color.push(o),o},te=function(e,t){var r,n=R();r=-5===t.activeLayerId?l:i,e.forEach(function(e){_(n,e.col*t.blockSize,e.row*t.blockSize,t.blockSize,t.blockSize,r(e,t))})},re=function(e,t,r){e.startCoord.x=t,e.startCoord.y=r},ne=function(e){var t=G(e);document.querySelector(".x-coord").innerHTML="coordX: ".concat(t.clickX),document.querySelector(".y-coord").innerHTML="coordY: ".concat(t.clickY)},oe={pointSize:1,canvasSize:32,blockSize:5,tool:"pen",color:"#007BFF",defaultColor:"#007BFF",eraseColor:"#007BFF",activeFrameId:0,activeLayerId:0,createFrameId:0,createLayerId:0,layersHook:[{frameId:0,layersId:[0]}],canvasBlocks:[],startCoord:{x:null,y:null},fps:2,keyboard:{pen:90,"choose-color":88,"paint-bucket":67,"paint-bucket-all":86,eraser:66,"color-picker":78,stroke:77,mirror:65,rectangle:83,square:68,"add-frame":71,"add-layer":72},settingTool:"pen"},ae=function(e,t){for(var r in e.keyboard)if(t===e.keyboard[r]){var n="#".concat(r," .key-letter");document.querySelector(n).innerHTML="(null)",e.keyboard[r]=null}},ce=function(){var e;e=R(),_(e,0,0,640,640,"#007BFF")},ie=function(){var e,t;e=oe,(t=document.querySelector(".modal-content")).addEventListener("click",function(t){t.target.matches(".keyboard-block button, .keyboard-block button * ")&&(e.settingTool=t.target.dataset.tool,console.log(e.settingTool))}),t.addEventListener("keydown",function(t){if(t.target.matches(".set-keyboard, .set-keyboard * ")){var r=t.keyCode;if(t.stopPropagation(),r>64&&r<91){ae(e,r),e.keyboard[e.settingTool]=r;var n="#".concat(e.settingTool," .key-letter");document.querySelector(n).innerHTML="(".concat(t.key,")")}}})},le=function(){var e,t;e=H(),_(e,0,0,128,128,"#007BFF"),A(oe),t=oe,document.querySelector(".fps-list").addEventListener("click",function(e){if(e.target.matches(".fps-list button, .fps-list button * ")){var r=e.target.dataset.fps;t.fps=r,U(r),A(t)}})},se=function(){var e;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={data:p(t),id:r};e.canvasBlocks.push(n)}(oe),Q(oe),e=oe,document.querySelector(".choose-color-block").addEventListener("click",function(t){if("choose-color"!==e.tool)return I||alert("Choose color picker tool before change color."),I=!0,t.stopPropagation(),!1;var r;try{for(var n=t.target;!n.dataset.color;)n=n.parentNode;r=n.dataset.color,e.color=r}catch(e){alert("Please choose color closer to button, not on its edge.")}}),document.querySelector(".tool-block").addEventListener("click",function(t){t.target.matches("#pen, #pen * ")?e.tool="pen":t.target.matches("#choose-color, #choose-color * ")?e.tool="choose-color":t.target.matches("#paint-bucket, #paint-bucket * ")?e.tool="paint-bucket":t.target.matches("#eraser, #eraser * ")?e.tool="eraser":t.target.matches("#color-picker, #color-picker * ")?e.tool="color-picker":t.target.matches("#paint-bucket-all, #paint-bucket-all * ")?e.tool="paint-bucket-all":t.target.matches("#stroke, #stroke * ")?e.tool="stroke":t.target.matches("#mirror, #mirror * ")?e.tool="mirror":t.target.matches("#rectangle, #rectangle * ")?(Y||alert("To rectangle or square drawing use mouseDown on canvas and then  use mouseUp on another canvas point"),Y=!0,e.tool="rectangle"):t.target.matches("#square, #square * ")&&(e.tool="square")}),document.querySelector(".choose-point-size-block").addEventListener("click",function(t){for(var r=t.target;!r.dataset.pointsize;)r=r.parentNode;e.pointSize=Number(r.dataset.pointsize)}),window.addEventListener("keydown",function(t){var r,o=t.keyCode;for(var a in e.keyboard)e.keyboard[a]===o&&(r=a);r&&("pen"===r?e.tool="pen":"paint-bucket"===r?e.tool="paint-bucket":"choose-color"===r?e.tool="choose-color":"paint-bucket-all"===r?e.tool="paint-bucket-all":"eraser"===r?e.tool="eraser":"color-picker"===r?e.tool="color-picker":"stroke"===r?e.tool="stroke":"mirror"===r?e.tool="mirror":"rectangle"===r?e.tool="rectangle":"square"===r?e.tool="square":"add-frame"===r?v(e):"add-layer"===r&&n(e),M(e))}),function(e){document.querySelector(".frames-wrap").addEventListener("click",function(t){if(t.target.matches(".add-frame, .add-frame * "))v(e);else if(t.target.matches(".fi-circle-x, .fi-circle-x * "))if(e.canvasBlocks.length>1){d();var r=b(t);if(x(e,r),r===e.activeFrameId){e.activeFrameId=e.canvasBlocks[0].id;var n=e.layersHook.find(function(t){return t.frameId===e.activeFrameId});e.activeLayerId=n.layersId[0],c(e),te(e.canvasBlocks[0].data,e)}k(e)}else alert("You can not delete last frame!");else if(t.target.matches(".fi-layers, .fi-layers * ")){d();var a=b(t),i=e.canvasBlocks.findIndex(function(e){return e.id===a}),l=JSON.parse(JSON.stringify(e.canvasBlocks[i]));y(e),l.id=e.createFrameId;var s=e.layersHook.find(function(e){return e.frameId===a});e.activeLayerId=s.layersId[0];var u=s.layersId,f=Object.create(null);u.forEach(function(t){o(e),f[t]=e.createLayerId}),l.data.forEach(function(e){e.color.forEach(function(e){e.id=f[e.id]})});var m={frameId:l.id,layersId:[]};for(var p in f)m.layersId.push(f[p]);e.layersHook.push(m),e.canvasBlocks=e.canvasBlocks.slice(0,i).concat(l,e.canvasBlocks.slice(i)),k(e)}else if(t.target.matches(".frame-element, .frame-element * ")){var h=b(t);e.activeFrameId=h,g(e.activeFrameId);var I=Z(e),Y=e.layersHook.find(function(e){return e.frameId===h});e.activeLayerId=Y.layersId[0],te(I,e),c(e)}})}(oe),function(e){document.querySelector(".layers-wrap").addEventListener("click",function(t){if(t.target.matches(".add-layer, .add-layer * "))n(e);else if(t.target.matches(".fi-circle-x, .fi-circle-x * ")){var r=e.activeFrameId,o=e.layersHook.findIndex(function(e){return e.frameId===r});if(e.layersHook[o].layersId.length>1){var a=b(t),i=e.layersHook[o].layersId.findIndex(function(e){return e===a});if(e.layersHook[o].layersId.splice(i,1),f(e),a===e.activeLayerId){e.activeLayerId=e.layersHook[o].layersId[0];var l=e.canvasBlocks.find(function(e){return e.id===r});te(l.data,e)}c(e)}else alert("You can not delete last layer!")}else if(t.target.matches(".fi-arrow-thick-bottom, .fi-arrow-thick-bottom *, .fi-arrow-thick-top, .fi-arrow-thick-top *")){var d;t.target.matches(".fi-arrow-thick-bottom, .fi-arrow-thick-bottom *")?d=!1:t.target.matches(".fi-arrow-thick-top, .fi-arrow-thick-top *")&&(d=!0);var m=b(t),v=e.activeFrameId,p=Z(e),y=e.layersHook.find(function(e){return e.frameId===v}),h=y.layersId.findIndex(function(e){return e===m});if(d&&0!==h){var k=y.layersId[h-1];s(e,p,k,m,y),c(e)}else if(d||h===y.layersId.length-1)alert("You can not change this layer position!");else{var g=y.layersId[h+1];s(e,p,g,m,y),c(e)}}else if(t.target.matches(".layer-element, .layer-element *")){var x=b(t);e.activeLayerId=x,u(x);var I=e.activeFrameId,Y=e.canvasBlocks.find(function(e){return e.id===I});te(Y.data,e)}else if(t.target.matches(".result-layer, .result-layer *")){var X=b(t);e.activeLayerId=X,u(X);var w=e.activeFrameId,S=e.canvasBlocks.find(function(e){return e.id===w});te(S.data,e)}})}(oe)};new Promise(function(e,t){try{ce(),se(),e()}catch(e){t(e)}}).then(function(){le(),ie()})}]);